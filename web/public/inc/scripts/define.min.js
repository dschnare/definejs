/*
Author: Darren Schnare
Keywords: javascript,amd,browser,define,module
License: MIT ( http://www.opensource.org/licenses/mit-license.php )
Repo: https://github.com/dschnare/definejs
*/
var define=function(n,t,i,r){"use strict";function f(){if(f.prod)return;var i,e,h,u,s,o,r,t;for(r=f.getContainer()||f.buffer,t=n.createDocumentFragment(),o=function(){return n.createTextNode(" ")},u=function(){return n.createElement("br")},s=function(t){return n.createTextNode(t===undefined?"undefined":t.toString())},e=arguments.length,r!==f.buffer&&f.buffer&&(r.appendChild(f.buffer),f.buffer=null),i=0;i<e;i+=1)t.appendChild(s(arguments[i])),t.appendChild(o());t.appendChild(u()),r.appendChild(t),f.defer()}function nt(){function i(){var i=n==="resolved"?u:r;while(i.length)i.shift()(t)}var u=[],r=[],n="unresolved",t;return{status:function(){return n},isResolved:function(){return n!=="unresolved"},resolve:function(r){if(n!=="unresolved")throw new Error("Cannot resolve a promise that is already resolved.");t=r,n="resolved",i()},error:function(r){if(n!=="unresolved")throw new Error("Cannot resolve a promise that is already resolved.");t=r,n="error",i()},done:function(i){n==="resolved"?i(t):n==="unresolved"&&u.push(i)},fail:function(i){n==="error"?i(t):n==="unresolved"&&r.push(i)}}}function k(){var n={};return{saveModuleExports:function(t,i){n[t]=i},removeModuleExports:function(t){delete n[t]},getModuleExports:function(t){return n[t]},containsModuleExports:function(t){return u.hasOwnProperty(n,t)}}}function h(n){var t,r,i;t={baseUrl:"",paths:{},urlArgs:"",timeout:5e3};if(!u.isObject(n))return t;u.hasOwnProperty(n,"baseUrl")&&typeof n.baseUrl=="string"&&n.baseUrl.length!==0&&(t.baseUrl=n.baseUrl,n.baseUrl.charAt(n.baseUrl.length-1)!=="/"&&(t.baseUrl+="/"));if(u.hasOwnProperty(n,"urlArgs"))if(u.isString(n.urlArgs))t.urlArgs="?"+n.urlArgs.replace(/^\?/,"");else if(u.isObject(n.urlArgs)){i="";for(r in n.urlArgs)typeof n.urlArgs[r]!="function"&&(i="&"+r+"="+encodeURIComponent(u.toString(n.urlArgs[r])));i.charAt(0)==="&"&&(i=i.substring(1)),t.urlArgs=i.length?"?"+i:i}u.isObject(n.paths)&&(t.paths=n.paths),!isNaN(n.timeout)&&parseFloat(n.timeout)>0&&(t.timeout=parseFloat(n.timeout));for(r in n)u.hasOwnProperty(t,r)||(t[r]=n[r]);return t}function ut(t,f,e,o){var s=n.createElement("script"),h;s.onload=function(){r(h),s.onload=null,s.onreadystatechange=null,s.onerror=null,u.isFunction(e)&&e(t)},s.onreadystatechange=function(){(s.readyState==="complete"||s.readyState==="loaded")&&s.onload()},s.onerror=function(){r(h),s.onload=null,s.onreadystatechange=null,s.onerror=null,u.isFunction(o)&&o(new Error("Failed to load script: "+t))},h=i(function(){s.onload=function(){},u.isFunction(o)&&o(new Error("Failed to load script '"+t+"' due to timeout ("+f+"ms)."))},f),s.src=t,n.getElementsByTagName("head")[0].appendChild(s)}function e(n){var f,i,t,o,r,u;o=e.VALID_CHARS_REGEXP,r=e.FILE_EXTENSION_LIKE_REGEXP,u=e.EMPTY_TERM_REGEXP,i=n.split("");for(f in i){t=i[f];if(typeof t!="string")continue;if(!o.test(t))return!1}return n.search(r)>0?!1:n.search(u)>=0?!1:!0}function ft(n){return e(n)?n.substring(0,2)==="./"?!1:n.substring(0,3)==="../"?!1:n.search(/a-z+:/i)>=0?!1:!0:!1}function it(n,t){var r,i;return i=t.split("/"),i.pop(),r=i.join("/")+(i.length?"/":""),n.substring(0,2)==="./"?n=r+n.substring(2):n.substring(0,3)==="../"&&(i.pop(),r=i.join("/")+(i.length?"/":""),n=r+n.substring(3)),n}function v(n,t,i,r,f,e){var h,o="",s=new RegExp("\\"+e+"$","i");return e=e||".js",n=it(n,t),u.hasOwnProperty(r,n)&&(n=r[n]),/^\/|^[a-z]+:/i.test(n)||s.test(n)?n:(o=i+n,o+=e,o+=f)}function y(n,t,i){var r;if(u.hasOwnProperty(i,n))if(n!==t){r=i[n];if(r.promise.isResolved())return!1;if(r.dependencies.contains(t))return!0;r.dependencies.forEach(function(n,r){if(y(r,t,i))return!0})}return!1}function b(n,t,i,r,f){var c,e,o,h;r=function(n){return function(t){u.isFunction(n)&&n(t)}}(r),f=function(n){return function(t){u.isFunction(n)&&n(t)}}(f),o=n.config,e=v(t,i,o.baseUrl,o.paths,o.urlArgs),n.containsModuleExports(t)?r(n.getModuleExports(t)):u.hasOwnProperty(n,t)?y(t,i,n)?r(undefined):(n[t].promise.done(r),n[t].promise.fail(f)):u.hasOwnProperty(n,e)?(n[e].done(r),n[e].fail(f)):(n[e]=h=nt(),ut(e,o.timeout,function(){delete n[e],s.dequeue()(n,t,e,function(n){r(n),h.resolve(n)},function(n){f(n),h.error(n)})},function(t){delete n[e],f(t)}))}function w(n,t,i){var r=function(r,f){if(u.isArray(r))if(u.isFunction(f))(function(r,u){function h(n,t){e&&(o[n]=t),e-=1,e===0&&u.apply(undefined,o)}function s(n){return function(t){h(n,t)}}var e=r.length,o=[],f;for(f in r){if(typeof r[f]=="function")continue;b(t,r[f],n,s(f),i)}})(r,f);else throw new Error("TypeError: Expected a callback function.");else if(u.isString(r)){switch(r){case"require":return w(n,t,i);case"config":return h.immutable(t.config)}if(t.containsModuleExports(r))return t.getModuleExports(r);throw new Error("Module has not been exported into context: "+r);}else throw new Error("TypeError: Expected a module ID.");};return r.toUrl=function(){var i=/\.[a-zA-Z0-9_]+$/;return function(r){var o,e,f=t.config;if(u.isString(r)&&i.test(r))return o=r.match(i).pop(),e=r.replace(i,""),v(e,n,f.baseUrl,f.paths,"",o);throw new Error("TypeError: Expected a module ID of the form 'module-id.extension'.");}}(),r}function l(n){n=u.isArray(n)?n.slice():[];var t=n.length;return n.count=function(){return t},n.forEach=function(n){var t;for(t in this){if(typeof this[t]=="function")continue;n.call(undefined,t,this[t])}},n.remove=function(n){u.hasOwnProperty(this,n)&&(delete this[n],t-=1)},n.contains=function(n){var t;for(t in this){if(typeof this[t]=="function")continue;if(this[t]===n)return!0}return!1},n}function et(){var t,n;return n=[],t={exports:null,module:null,require:null},{importCommonJsExports:function(i){return i.forEach(function(r,u){switch(u){case"exports":n[r]=t.exports={},i.remove(r)}}),t.exports},importCommonJs:function(i,r,u,f){f.forEach(function(e,o){switch(o){case"require":n[e]=t.require=w(i,u,null),t.require.main={id:i,uri:r},f.remove(e);break;case"module":n[e]=t.module={id:i,uri:r},f.remove(e)}})},set:function(t,i){n[t]=i},valueOf:function(){return n}}}function tt(n){var i,t,f,u,s,o,r,e=[];i=n.toString(),t=/^function\s*\((.*?)\)/.exec(i)[1];if(t)for(t=t.split(","),s=t.length,u=0;u<s;u+=1){f=t[u].replace(/^\s+|\s+$/g,"");switch(f){case"require":case"exports":case"module":e.push(f);break;default:throw new Error("Unrecognized dependency '"+f+"' in script: "+i);}}o=/require\(('|")(.+?)\1\)/g,r=o.exec(i);while(r)e.push(r[2]),r=o.exec(i);return e}function rt(n){var o,f,r,e=[],t,i={moduleId:"",dependencies:l()};if(n.length>1){f=u.isString(n[0])?u.toString(n.shift()):"",r=u.isArray(n[0])?n.shift().slice():e,t=n.pop();if(r!==e&&!u.isFunction(t))throw new Error("Expected a module factory function, instead got '"+t+"'.");i.moduleId=f,i.dependencies=l(r)}else t=n.pop();return i.factory=function(n,i){var r;return u.isFunction(t)?(r=u.isArray(n)?t.apply(undefined,n):t.call(undefined,n),i||r):t},i.dependencies.count()===0&&u.isFunction(t)&&(i.dependencies=l(tt(t))),i}function p(n){function t(){var f,e,r,l,h,a,v=!1;try{f=rt(d.prototype.slice.call(arguments))}catch(y){o.trigger(y);return}e=f.dependencies,l=et(),r=l.importCommonJsExports(e),h=nt(),f.moduleId&&(ft(f.moduleId)?u.hasOwnProperty(n,f.moduleId)?(o.trigger("Module '"+f.moduleId+"' has already been defined."),v=!0):r?n.saveModuleExports(f.moduleId,r):n[f.moduleId]={promise:h,dependencies:e}:(o.trigger(new Error("Invalid explicit module ID: "+f.moduleId)),v=!0));if(v)return;s.enqueue(a=function(i,s,a,v,y){var p;s=f.moduleId||s,y=function(n){return function(t){delete p[s],u.isFunction(n)?(n(t),h.error(t)):o.trigger(t)}}(y),t===c?(i!==n&&(i[s]=n[s],delete n[s],r&&(i.saveModuleExports(s,r),n.removeModuleExports(s))),p=i):p=n;if(!r&&p.containsModuleExports(s)){y(new Error("Module '"+s+"' has already been defined."));return}try{l.importCommonJs(s,a,p,e)}catch(w){y(w);return}v=function(n){var t=f.dependencies.count();return function(i,e){t&&l.set(i,e),t-=1;if(t<=0)try{r=f.factory(l.valueOf(),r),p.saveModuleExports(s,r),delete p[s],u.isFunction(n)&&n(r),h.resolve(r)}catch(o){y(o)}}}(v),r?n.saveModuleExports(s,r):p[s]={promise:h,dependencies:e},e.count()?e.forEach(function(n,t){b(p,t,s,function(t){v(n,t)},y)}):v()}),i(function(){s.contains(a)&&(s.remove(a),a(n,"",""))},1)}return t.error=o.error,t.log=f,t.context=function(n){var t=k();return t.config=h(n),{define:p(t)}},t.amd={plugins:!1,pluginDynamic:!1,multiversion:!0,defaultDeps:!1,jQuery:!0},t}if(t.define&&t.define.amd)return t.define;f.prod=!1,f.buffer=n.createDocumentFragment(),f.defer=function(){var n=f.getContainer();n?f.buffer&&(n.appendChild(f.buffer),f.buffer=null):i(f.defer,0)},f.getContainer=function(){return n.body};var c,s,u,o,d,a,g;return d=[].constructor,a="".constructor,u={isFunction:function(n){return typeof n=="function"},isArray:function(n){return{}.toString.call(n)==="[object Array]"},isString:function(n){return n instanceof a||typeof n=="string"},isObject:function(n){return n===null||n===undefined?!1:typeof n=="object"},toString:function(n){return n===undefined?"undefined":n.toString()},hasOwnProperty:function(){var n=Object.prototype.hasOwnProperty;return function(t,i){return n.call(t,i)}}(),object:{create:function(n){function t(){}return t.prototype=n,new t}}},o=function(){var n=[];return{error:function(t){u.isFunction(t)&&n.push(t)},trigger:function(t){var i,r=n.length;if(r===0)throw t;for(i=0;i<r;i+=1)n[i](t)}}}(),s=function(){var n=[];return n.enqueue=function(n){this.push(n)},n.dequeue=function(){return this.shift()},n.contains=function(n){for(var i=this.length,t=0;t<i;t+=1)if(this[t]===n)return!0;return!1},n.remove=function(n){for(var i=this.length,t=0;t<i;t+=1)if(this[t]===n){this.splice(t,1);break}},n.clear=function(){while(this.length)this.pop()},n}(),h.immutable=function(n){return n=u.object.create(n),n.paths&&(n.paths=u.object.create(n.paths)),n},e.VALID_CHARS_REGEXP=/[a-z0-9_\-\/\.]/i,e.FILE_EXTENSION_LIKE_REGEXP=/[^\/].[^\/]/,e.EMPTY_TERM_REGEXP=/\/\//,g=function(){var e,n,h={'"':'"',"\\":"\\","/":"/",b:"\b",f:"\f",n:"\n",r:"\r",t:"\t"},o,r=function(n){throw{name:"SyntaxError",message:n,at:e,text:o};},t=function(t){return t&&t!==n&&r("Expected '"+t+"' instead of '"+n+"'"),n=o.charAt(e),e+=1,n},c=function(){var u,i="";n==="-"&&(i="-",t("-"));while(n>="0"&&n<="9")i+=n,t();if(n==="."){i+=".";while(t()&&n>="0"&&n<="9")i+=n}if(n==="e"||n==="E"){i+=n,t(),(n==="-"||n==="+")&&(i+=n,t());while(n>="0"&&n<="9")i+=n,t()}u=+i;if(isFinite(u))return u;r("Bad number")},s=function(){var f,e,i="",u;if(n==='"'){while(t())if(n==='"'){t();break}else if(n==="\\"){t();if(n==="u"){for(u=0,e=0;e<4;e+=1){f=parseInt(t(),16);if(!isFinite(f))break;u=u*16+f}i+=a.fromCharCode(u)}else if(typeof h[n]=="string")i+=h[n];else break}else i+=n;return i}r("Bad string")},i=function(){while(n&&n<=" ")t()},y=function(){switch(n){case"t":return t("t"),t("r"),t("u"),t("e"),!0;case"f":return t("f"),t("a"),t("l"),t("s"),t("e"),!1;case"n":return t("n"),t("u"),t("l"),t("l"),null}r("Unexpected '"+n+"'")},f,v=function(){var u=[];if(n==="["){t("["),i();if(n==="]")return t("]"),u;while(n){u.push(f()),i();if(n==="]")return t("]"),u;t(","),i()}}r("Bad array")},l=function(){var o,e={};if(n==="{"){t("{"),i();if(n==="}")return t("}"),e;while(n){o=s(),i(),t(":"),u.hasOwnProperty(e,o)&&r('Duplicate key "'+o+'"'),e[o]=f(),i();if(n==="}")return t("}"),e;t(","),i()}}r("Bad object")};return f=function(){i();switch(n){case"{":return l();case"[":return v();case'"':return s();case"-":return c();default:return n>="0"&&n<="9"?c():y()}},function(t,s){var h;return o=t,e=0,n=" ",h=f(),i(),n&&r("Syntax error"),typeof s=="function"?function c(n,t){var r,f,i=n[t];if(i&&typeof i=="object")for(r in i)u.hasOwnProperty(i,r)&&(f=c(i,r),f!==undefined?i[r]=f:delete i[r]);return s.call(n,t,i)}({"":h},""):h}}(),c=function(){var s,o,f,i,l,r,t,u,c,e;f=n.getElementsByTagName("script"),i=f.length,l=/define.*?\.js$/;while(i){i-=1;if(l.test(f[i].src)){r=f[i].innerHTML,r=r.replace(/^\s+|\s+$/g,"");if(r)try{t=g(r),c=t?t.config:null,u=t?t.main:null}catch(a){e=new Error("An error occurred while parsing the JSON initialization object."),e.nestedError=a;throw e;}break}}return s=k(),s.config=h(c),o=p(s),u&&typeof u=="string"&&o([u],function(){}),o}()}(document,window,setTimeout,clearTimeout)